{% extends "castle/page_with_selected_sidebar.html" %}
{%comment%}
This file is part of Ficlatt√©.
Copyright (C) 2015 Paul Robertson

    This program is free software: you can redistribute it and/or modify
    it under the terms of version 3 of the GNU Affero General Public
    License as published by the Free Software Foundation
    

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
{%endcomment%}
{% load staticfiles %}
{% load castle_tags %}

{% block primary_panel %}

        <div class="well well-sm" id="whats-new">
            <h3>What&#39;s new</h3>
            <div class="row" id="featured-popular">
              <div class="col-md-8" id="featured-story">
                <div class="panel panel-success">
                  <div class="panel-heading">
                    <h3 class="panel-title">Featured challenge</h3>
                  </div> <!-- id="" class="panel-heading" -->
                  <div class="panel-body">
                    {% if featured %}
                    <h3>{{featured|challenge_link}}</h3>
                        {% if suppressed %}
                            <p>Story is marked as mature</p>
                        {% else %}
                            {{featured.body|big_snippet}}
                        {% endif %}
                    <div class="row">
                      <div class="col-md-4">
                        {{featured.user|avatar}}
                      </div> <!-- id="" class="col-md-4" -->
                      <div class="col-md-8">
                        <p>{{featured.user|author_span}}</p>
                      </div> <!-- id="" class="col-md-8" -->
                    </div> <!-- id="" class="row" -->
                    {% endif %}
                  </div> <!-- id="" class="panel-body" -->
                </div> <!-- id="" class="panel panel-success" -->
              </div> <!-- id="featured-story" class="col-md-8" -->
              <div class="col-md-4" id="popular-stories" style="float: right;">
                {% if popular %}
                <div class="panel panel-success">
                  <div class="panel-heading">
                    <h3 class="panel-title">Popular challenges</h3>
                  </div> <!-- id="" class="panel-heading" -->
                  <div class="panel-body">
                    {% if popular %}
                    <div class="list-group">
                      {% for challenge in popular %}
                      <div class="list-group-item">
                        {{challenge|challenge_link:'h5 class="list-group-item-heading"'}}
                        {{challenge.user|author_span}}
                      </div> <!-- id="" class="list-group-item" -->
                      {% endfor %}
                    </div> <!-- id="" class="list-group" -->
                    {% endif %}
                    <p><a class="btn btn-success" href="/challenges/popular/" role="button">More popular challenges &raquo;</a></p>
                  </div> <!-- id="" class="panel-body" -->
                </div> <!-- id="" class="panel panel-success" -->
                {% endif %}
              </div> <!-- id="popular-stories" class="col-md-4" -->
            </div> <!-- id="featured-popular" class="row" -->
          </div> <!-- id="whats-new" class="well well-sm" -->

          <div id="challenge-summary">  
            <div class="col-md-4" id="active-challenges">
              <div class="panel panel-success">
                <div class="panel-heading">
                  <h3 class="panel-title">Active challenges</h3>
                </div> <!-- id="" class="panel-heading" -->
                <div class="panel-body">
                  {% if active %}
                  <div class="list-group">
                      {% for challenge in active %}
                      <div class="list-group-item">
                        {{challenge|challenge_link:'h5 class="list-group-item-heading"'}}
                        {{challenge.user|author_span}}
                      </div> <!-- id="" class="list-group-item" -->
                      {% endfor %}
                  </div> <!-- id="" class="list-group" -->
                  {% endif %}
                  <p><a class="btn btn-success" href="/challenges/active/" role="button">More active challenges &raquo;</a></p>
                </div> <!-- id="" class="panel-body" -->
              </div> <!-- id="" class="panel panel-success" -->
            </div> <!-- id="active-stories" class="col-md-4" -->
            <div class="col-md-4" id="recent-stories">
              <div class="panel panel-success">
                <div class="panel-heading">
                  <h3 class="panel-title">Recent challenges</h3>
                </div> <!-- id="" class="panel-heading" -->
                <div class="panel-body">
                  {% if recent %}
                  <div class="list-group">
                      {% for challenge in recent %}
                      <div class="list-group-item">
                        {{challenge|challenge_link:'h5 class="list-group-item-heading"'}}
                        {{challenge.user|author_span}}
                      </div> <!-- id="" class="list-group-item" -->
                      {% endfor %}
                  </div> <!-- id="" class="list-group" -->
                  {% endif %}
                  <p><a class="btn btn-success" href="/challenges/recent/" role="button">More recent challenges &raquo;</a></p>
                </div> <!-- id="" class="panel-body" -->
              </div> <!-- id="" class="panel panel-success" -->
            </div> <!-- id="recent-stories" class="col-md-4" -->
            <div class="col-md-4" id="recent-winners">
              <div class="panel panel-success">
                <div class="panel-heading">
                  <h3 class="panel-title">Recent winners</h3>
                </div> <!-- id="" class="panel-heading" -->
                <div class="panel-body">
                  {% if recent_winners %}
                  <div class="list-group">
                      {% for story in recent_winners %}
                      <div class="list-group-item">
                        {{story|story_link:'h5 class="list-group-item-heading"'}}
                        {{story.user|author_span}}
                      </div> <!-- id="" class="list-group-item" -->
                      {% endfor %}
                  </div> <!-- id="" class="list-group" -->
                  {% endif %}
                </div> <!-- id="" class="panel-body" -->
              </div> <!-- id="" class="panel panel-success" -->
            </div> <!-- id="old-stories" class="col-md-4" -->
          </div> <!-- id="challenge-summary" -->

{% endblock primary_panel %}
